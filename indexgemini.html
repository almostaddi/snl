<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Physical Snakes & Ladders</title>
    <style>
        body { font-family: sans-serif; display: flex; flex-direction: column; align-items: center; background: #f0f0f0; }
        
        /* The Board */
        #board-container { position: relative; margin: 20px; }
        #board { 
            display: grid; 
            grid-template-columns: repeat(10, 50px); 
            grid-template-rows: repeat(10, 50px); 
            border: 2px solid #333; 
            background: white;
        }
        .square { 
            width: 50px; height: 50px; 
            border: 1px solid #ccc; 
            display: flex; align-items: center; justify-content: center; 
            font-weight: bold; font-size: 14px;
        }
        #player { 
            width: 30px; height: 30px; 
            background: #e74c3c; border-radius: 50%; 
            position: absolute; transition: all 0.4s ease; 
            border: 3px solid white; box-shadow: 0 2px 5px rgba(0,0,0,0.3);
            z-index: 100;
        }

        /* Controls */
        .panel { width: 500px; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .toy-box { display: flex; gap: 15px; margin-bottom: 20px; }
        .active-mods { margin: 10px 0; min-height: 30px; display: flex; gap: 5px; flex-wrap: wrap; }
        .badge { background: #ffeaa7; padding: 5px 10px; border-radius: 15px; font-size: 12px; border: 1px solid #fdcb6e; }

        /* Advanced Menu */
        .advanced-trigger { color: #0984e3; text-decoration: underline; cursor: pointer; font-size: 14px; }
        #advancedArea { margin-top: 15px; padding: 15px; border: 1px solid #dfe6e9; border-radius: 5px; background: #f9f9f9; }
        .mod-row { margin-bottom: 10px; font-size: 13px; }
        .slider-wrap { display: flex; align-items: center; gap: 10px; }
        input[type=range] { flex: 1; }

        .btn-main { width: 100%; padding: 15px; background: #2ecc71; color: white; border: none; border-radius: 5px; font-size: 18px; cursor: pointer; }
        .btn-main:hover { background: #27ae60; }
    </style>
</head>
<body>

    <div id="board-container">
        <div id="player"></div>
        <div id="board"></div>
    </div>

    <div class="panel">
        <div id="setup">
            <h3>Select Toys</h3>
            <div class="toy-box">
                <label><input type="checkbox" class="toy-check" value="basketball" onchange="syncToys()"> Basketball</label>
                <label><input type="checkbox" class="toy-check" value="soccerball" onchange="syncToys()"> Soccer Ball</label>
                <label><input type="checkbox" class="toy-check" value="jumprope" onchange="syncToys()"> Jump Rope</label>
            </div>

            <div style="margin-bottom: 15px;">
                Difficulty: 
                <button onclick="setDifficulty('easy')">Easy</button>
                <button onclick="setDifficulty('medium')">Medium</button>
                <button onclick="setDifficulty('hard')">Hard</button>
            </div>

            <span class="advanced-trigger" onclick="toggleAdvanced()">Advanced Modifier Settings â–¼</span>
            
            <div id="advancedArea" style="display:none;">
                <div id="modSettingsList"></div>
            </div>

            <button class="btn-main" style="margin-top:20px;" onclick="startGame()">Start Game</button>
        </div>

        <div id="game" style="display:none;">
            <div class="active-mods" id="tray"></div>
            <div id="status" style="font-size: 1.2em; font-weight: bold; margin-bottom: 10px;">Square: 1</div>
            <button class="btn-main" onclick="roll()">Roll Dice</button>
            <div id="task" style="margin-top:15px; padding:10px; background:#f0f7ff; border-radius:5px;"></div>
        </div>
    </div>

<script>
    let pos = 1;
    let toys = { basketball: false, soccerball: false, jumprope: false };
    const snakes = { 17: 7, 54: 34, 62: 19, 98: 79 };
    const ladders = { 3: 38, 24: 56, 42: 84, 71: 91 };

    let modifiers = {
        basketball: {
            left: { label: "Left Hand Only", active: false, add: 20, rem: 50 },
            right: { label: "Right Hand Only", active: false, add: 20, rem: 50 }
        },
        soccerball: {
            between: { label: "Ball Between Feet", active: false, add: 25, rem: 60 }
        },
        jumprope: {
            neck: { label: "Rope on Neck", active: false, add: 15, rem: 50 }
        }
    };

    function createBoard() {
        const board = document.getElementById('board');
        for (let r = 9; r >= 0; r--) {
            for (let c = 0; c < 10; c++) {
                let sNum;
                if (r % 2 !== 0) sNum = (r * 10) + (10 - c);
                else sNum = (r * 10) + (c + 1);
                
                const div = document.createElement('div');
                div.className = 'square';
                div.id = 's' + sNum;
                div.textContent = sNum;
                if (snakes[sNum]) div.style.background = "#ffcccc";
                if (ladders[sNum]) div.style.background = "#ccffcc";
                board.appendChild(div);
            }
        }
    }

    function movePlayer() {
        const sq = document.getElementById('s' + pos);
        const player = document.getElementById('player');
        player.style.left = sq.offsetLeft + 10 + "px";
        player.style.top = sq.offsetTop + 10 + "px";
    }

    function syncToys() {
        document.querySelectorAll('.toy-check').forEach(cb => {
            toys[cb.value] = cb.checked;
        });
        renderAdvanced();
    }

    function renderAdvanced() {
        const list = document.getElementById('modSettingsList');
        list.innerHTML = '';
        Object.keys(modifiers).forEach(t => {
            if (toys[t]) {
                const group = document.createElement('div');
                group.innerHTML = `<strong>${t.toUpperCase()}</strong>`;
                Object.keys(modifiers[t]).forEach(mKey => {
                    const m = modifiers[t][mKey];
                    group.innerHTML += `
                        <div class="mod-row">
                            ${m.label}<br>
                            <div class="slider-wrap">Add: <input type="range" value="${m.add}" onchange="modifiers['${t}']['${mKey}'].add=this.value"> ${m.add}%</div>
                            <div class="slider-wrap">Rem: <input type="range" value="${m.rem}" onchange="modifiers['${t}']['${mKey}'].rem=this.value"> ${m.rem}%</div>
                        </div>`;
                });
                list.appendChild(group);
            }
        });
        if (list.innerHTML === '') list.innerHTML = "Select a toy to see modifiers.";
    }

    function setDifficulty(lvl) {
        const settings = { easy: [10, 70], medium: [25, 45], hard: [45, 20] };
        Object.keys(modifiers).forEach(t => {
            Object.keys(modifiers[t]).forEach(m => {
                modifiers[t][m].add = settings[lvl][0];
                modifiers[t][m].rem = settings[lvl][1];
            });
        });
        renderAdvanced();
    }

    function roll() {
        let die = Math.floor(Math.random() * 6) + 1;
        pos += die;
        if (pos >= 100) pos = 100;

        let landedOnSpecial = false;
        if (snakes[pos]) { pos = snakes[pos]; landedOnSpecial = true; }
        else if (ladders[pos]) { pos = ladders[pos]; landedOnSpecial = true; }

        if (!landedOnSpecial) {
            Object.keys(modifiers).forEach(t => {
                if (toys[t]) {
                    Object.keys(modifiers[t]).forEach(mKey => {
                        let m = modifiers[t][mKey];
                        let r = Math.random() * 100;
                        if (!m.active && r < m.add) m.active = true;
                        else if (m.active && r < m.rem) m.active = false;
                    });
                }
            });
        }

        updateUI(die);
    }

    function updateUI(dieValue) {
        document.getElementById('status').textContent = `Rolled: ${dieValue} | Square: ${pos}`;
        movePlayer();
        const tray = document.getElementById('tray');
        tray.innerHTML = '';
        Object.keys(modifiers).forEach(t => {
            Object.keys(modifiers[t]).forEach(m => {
                if (modifiers[t][m].active && toys[t]) {
                    tray.innerHTML += `<span class="badge">${modifiers[t][m].label}</span>`;
                }
            });
        });
        document.getElementById('task').innerHTML = `Complete 10 reps while maintaining active modifiers!`;
    }

    function startGame() {
        document.getElementById('setup').style.display = 'none';
        document.getElementById('game').style.display = 'block';
        movePlayer();
    }

    function toggleAdvanced() {
        const area = document.getElementById('advancedArea');
        area.style.display = area.style.display === 'none' ? 'block' : 'none';
    }

    window.onload = () => { createBoard(); movePlayer(); };
</script>
</body>
</html>
